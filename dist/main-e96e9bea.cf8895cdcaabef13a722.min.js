"use strict";(self.webpackChunkweave=self.webpackChunkweave||[]).push([[100],{225:(e,t,n)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===a(o)?o:String(o)),i)}var r,o}n.d(t,{default:()=>l});var r=n(568);n(429).v4;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.start=(new Date).getTime(),t instanceof Date?(this.start=t.getTime(),this.end=null,this.fabric=[],this.id=1e4*Math.random(),this.cutFabric(t)):"number"==typeof t?(this.start=t,this.end=null,this.fabric=[],this.id=1e4*Math.random(),this.cutFabric(t)):"object"===a(t)&&("time_weaver"===t.type?(this.start=t.start,this.end=t.end,this.fabric=t.fabric,this.id=t.id):(this.end=null,this.fabric=[],this.id=1e4*Math.random())),this.type="time_weaver"}var t,n,o;return t=e,(n=[{key:"endWeaving",value:function(e){this.end=(new Date).getTime(),e instanceof Date?this.end=e.getTime():"number"==typeof e&&(this.end=e)}},{key:"cutFabric",value:function(e){var t=(new Date).getTime();e instanceof Date?t=e.getTime():"number"==typeof e&&(t=e);var n={type:"fabric",activity:[],start:t,name:"Fabric ".concat(this.fabric.length+1)};this.fabric.push(n)}},{key:"pauseWeaving",value:function(e){var t=(new Date).getTime();e instanceof Date?t=e.getTime():"number"==typeof e&&(t=e);var n={type:"pause",start:t};if(this.fabric.length>0){var a=this.fabric[this.fabric.length-1].activity;a.length>0?"continue"===a[a.length-1].type&&this.fabric[this.fabric.length-1].activity.push(n):this.fabric[this.fabric.length-1].activity.push(n)}}},{key:"continueWeaving",value:function(e){var t=(new Date).getTime();e instanceof Date?t=e.getTime():"number"==typeof e&&(t=e);var n={type:"continue",start:t};if(this.fabric.length>0){var a=this.fabric[this.fabric.length-1].activity;"pause"===a[a.length-1].type&&this.fabric[this.fabric.length-1].activity.push(n)}}},{key:"switchActivityType",value:function(){"pause"===this.getStatus().activity?this.continueWeaving():this.pauseWeaving()}},{key:"getBlocks",value:function(e){var t=(new Date).getTime();e instanceof Date?t=e.getTime():"number"==typeof e&&(t=e);for(var n=this.fabric,a=n.length,i=[],r=t||this.end,o=0;o<a;o++){for(var c=n[o],u=(n[o-1],n[o+1]),s={start:0===o?this.start:c.start,end:o===a-1?r:u.start,name:c.name},l=[],f=c.activity,d=f.length,v=0;v<d;v++){var h=f[v],y=f[v-1]||h,p={start:0===v?s.start:y.start,end:h.start<s.end?h.start:s.end,type:0===v?"continue":y.type};l.push(p),v===d-1&&h.start<s.end&&(p={start:p.end,end:s.end,type:d>1?"continue"===y.type?"pause":"continue":h.type},l.push(p))}0===d&&(p={start:s.start,end:s.end,type:"continue"},l.push(p)),s.activity=l,i.push(s)}return i}},{key:"getStatus",value:function(e){var t=(new Date).getTime();e instanceof Date?t=e.getTime():"number"==typeof e&&(t=e);var n=this.getBlocks().filter((function(e){return e.start<=t&&e.end>=t})),a=n.length>0?n[0].activity.filter((function(e){return e.start<=t&&e.end>=t})):[{type:"null"}];return{passed:t-(n.length>0?n[0].start:0),activity:a.length>0?a[0].type:"continue",fabric:n.length>0?n[0].name:"null"}}},{key:"saveToLocalStorage",value:function(){var e={start:this.start,end:this.end,fabric:this.fabric,id:this.id,type:this.type},t=r(JSON.stringify(e));t!==this.hash&&(this.hash=t,localStorage.setItem("time_weaver_x_"+this.id,JSON.stringify(e)))}},{key:"setFabricNameTo",value:function(e,t){var n=this.fabric[e];n.name=t.target.value,this.fabric.splice(e,1,n),this.saveToLocalStorage()}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return e/1e3/60*70}function u(e){var t=0;return e.reverse().map((function(e){return t+=c(e.end-e.start),'<div class="activity" style="--activity-height:'.concat(c(e.end-e.start),"px;--activity-translateY:").concat(t-c(e.end-e.start),'px" type="').concat(e.type,'"></div>')})).join("")}function s(){var e=weaver.getStatus();document.querySelector(".dashboard .current_fabric").innerText=e.fabric,document.querySelector(".dashboard .current_passed_time").innerText=getDurationAndFormat(0,e.passed),document.querySelector(".dashboard .current_activity").innerText=e.activity,weaver.saveToLocalStorage();var t=-1,n=-1;weaver.getBlocks(new Date).map((function(e){return n+=1,Object.assign(e,{index:n})})).filter((function(e){t+=1;var n=String(fabric_element_update["d_".concat(t)]);return fabric_element_update["d_".concat(t)]=md5(JSON.stringify(e)),n!==md5(JSON.stringify(e))})).forEach((function(e){var t=document.querySelectorAll('.fabric .fabric_block[index="'.concat(e.index,'"]'));if(t.length>0)t[0].querySelector(".fabric_block_activity").innerHTML="".concat(u(e.activity)),t[0].style.setProperty("--fabric-height","".concat(c(e.end-e.start),"px"));else{var n=document.createElement("div");n.setAttribute("index",e.index),n.classList.add("fabric_block"),n.style.setProperty("--fabric-height","".concat(c(e.end-e.start),"px")),n.innerHTML='<div class="fabric_block_name"><input type="text" value="'.concat(e.name,'" index="').concat(e.index,'" onkeyup="weaver.setFabricNameTo(').concat(e.index,',event)" onselectionchange="weaver.setFabricNameTo(').concat(e.index,',event)"></div><div class="fabric_block_activity">').concat(u(e.activity),"</div>"),document.querySelector(".fabric").prepend(n)}1}));window.requestAnimationFrame(s)}updateStatus(),window.fabric_element_update={},window.fabric_activity_element_update={},window.weaver=new o,window.weave=function(){var e=function(e){var t=[];for(var n in window.localStorage)String(n).indexOf(e)>-1&&t.push(n);return t}("time_weaver_x_").sort((function(e,t){e=JSON.parse(String(localStorage.getItem(e))).start;return(t=JSON.parse(String(localStorage.getItem(t))).start)-e}));weaver=new o(e.length>0?JSON.parse(String(localStorage.getItem(e[0]))):new Date),s()};const l=window.weave},8:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=o;var a,i=(a=n(435))&&a.__esModule?a:{default:a};const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function o(e,t=0){return(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase()}var c=function(e,t=0){const n=o(e,t);if(!(0,i.default)(n))throw TypeError("Stringified UUID is invalid");return n};t.default=c},990:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n(319))&&a.__esModule?a:{default:a},r=n(8);let o,c,u=0,s=0;var l=function(e,t,n){let a=t&&n||0;const l=t||new Array(16);let f=(e=e||{}).node||o,d=void 0!==e.clockseq?e.clockseq:c;if(null==f||null==d){const t=e.random||(e.rng||i.default)();null==f&&(f=o=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=c=16383&(t[6]<<8|t[7]))}let v=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:s+1;const y=v-u+(h-s)/1e4;if(y<0&&void 0===e.clockseq&&(d=d+1&16383),(y<0||v>u)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=v,s=h,c=d,v+=122192928e5;const p=(1e4*(268435455&v)+h)%4294967296;l[a++]=p>>>24&255,l[a++]=p>>>16&255,l[a++]=p>>>8&255,l[a++]=255&p;const b=v/4294967296*1e4&268435455;l[a++]=b>>>8&255,l[a++]=255&b,l[a++]=b>>>24&15|16,l[a++]=b>>>16&255,l[a++]=d>>>8|128,l[a++]=255&d;for(let e=0;e<6;++e)l[a+e]=f[e];return t||(0,r.unsafeStringify)(l)};t.default=l},237:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(925)),i=r(n(163));function r(e){return e&&e.__esModule?e:{default:e}}var o=(0,a.default)("v3",48,i.default);t.default=o},925:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function a(e,a,o,c){var u;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof a&&(a=(0,r.default)(a)),16!==(null===(u=a)||void 0===u?void 0:u.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(a),s.set(e,a.length),s=n(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,o){c=c||0;for(let e=0;e<16;++e)o[c+e]=s[e];return o}return(0,i.unsafeStringify)(s)}try{a.name=e}catch(e){}return a.DNS=o,a.URL=c,a};var a,i=n(8),r=(a=n(222))&&a.__esModule?a:{default:a};const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=o;const c="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=c},355:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(790)),i=o(n(319)),r=n(8);function o(e){return e&&e.__esModule?e:{default:e}}var c=function(e,t,n){if(a.default.randomUUID&&!t&&!e)return a.default.randomUUID();const o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return(0,r.unsafeStringify)(o)};t.default=c},764:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(925)),i=r(n(757));function r(e){return e&&e.__esModule?e:{default:e}}var o=(0,a.default)("v5",80,i.default);t.default=o},435:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n(58))&&a.__esModule?a:{default:a};var r=function(e){return"string"==typeof e&&i.default.test(e)};t.default=r},464:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,i=(a=n(435))&&a.__esModule?a:{default:a};var r=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=r}}]);
//# sourceMappingURL=main-e96e9bea.cf8895cdcaabef13a722.min.js.map